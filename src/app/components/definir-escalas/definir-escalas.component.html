<ng-container *ngIf="hasRole([ROLES.ADMIN_SGA, ROLES.DOCENTE, ROLES.ESTUDIANTE, ROLES.CONSEJO_CURRICULAR]); else noPermission">
    <div class="container">
        <div class="form-container">
            <h2>{{ "definir_escalas.titulo" | translate }}</h2>
            <div class="form-group">
                <label for="tipoEscala">{{ "definir_escalas.seleccionar_tipo_escala" | translate }}</label>
                <select id="tipoEscala" class="form-control" [(ngModel)]="tipoEscala" (change)="onChangeTipoEscala()">
                    <option value="" disabled selected>{{ "definir_escalas.seleccione" | translate }}</option>
                    <option value="cualitativa">{{ "definir_escalas.cualitativa" | translate }}</option>
                    <option value="cuantitativa">{{ "definir_escalas.cuantitativa" | translate }}</option>
                </select>
            </div>

            <!-- Lista de escalas cualitativas -->
        <mat-card>
            <mat-card-content>
            <div class="escala-container">
                <div class="escala-list">
                    <!-- Encabezados de la tabla -->
                    <div class="escala-header">
                        <div class="escala-header-item">{{ 'definir_escalas.tipo' | translate }}</div>
                        <div class="escala-header-item">{{ 'definir_escalas.criterios' | translate }}</div>
                        <div class="escala-header-item">{{ 'definir_escalas.acciones' | translate }}</div>
                    </div>
                    <div class="escala-item row mb-2" *ngFor="let escala of cualitativaEscalas; let i = index">
                        <!-- Input de label -->
                        <div class="col-5">
                            <input class="form-control custom-input" [(ngModel)]="escala.label"
                                placeholder="{{ 'definir_escalas.estado' | translate }}">
                        </div>
                        <!-- Input de descripción -->
                        <div class="col-5">
                            <input class="form-control custom-input" [(ngModel)]="escala.descripcion"
                                placeholder="Descripción">
                        </div>
                        <!-- Botones de editar y eliminar -->
                        <div class="col-2 d-flex align-items-center justify-content-end">
                            <button mat-icon-button class="small-icon"
                                (click)="editarEscala(escala, i)"><mat-icon>edit</mat-icon></button>
                            <button mat-icon-button class="small-icon"
                                (click)="eliminarEscala('cualitativa', i)"><mat-icon>delete</mat-icon></button>
                        </div>
                    </div>
                </div>
                <!-- Botones para cualitativa -->
                <div class="button-container">
                    <button mat-flat-button color="primary" class="btn-add-scale" (click)="agregarEscala('cualitativa')">
                        <mat-icon>add</mat-icon>
                        {{ 'definir_escalas.agregar_elemento_escala' | translate }}
                    </button>
                    <button mat-flat-button color="primary">
                        <mat-icon>save</mat-icon>
                        {{ 'definicion_formularios.guardar' | translate }}
                    </button>
                </div>
            </div>
        </mat-card-content>
    </mat-card>

    <!-- Segunda Card (Escala Cuantitativa) -->
    <mat-card class="card-item glass-card">
        <mat-card-header>
            <mat-card-title>{{ "definir_escalas.titulo_cuantitativo" | translate }}</mat-card-title>
            <mat-card-subtitle>{{ "definir_escalas.sub_titulo_cuantitativo" | translate }}</mat-card-subtitle>
            <mat-icon class="star-icon">bar_chart</mat-icon>
        </mat-card-header>
        <mat-card-content>
            <div class="row mt-4">
                <div class="col-12">
                    <div class="alert info">
                        <mat-icon class="icon">info</mat-icon>
                        <span>{{ 'definir_escalas.alerta_cuantitativa' | translate }}</span>
                    </div>
                </div>
            </div>

            <!-- Lista de escalas cuantitativas -->
            <div class="escala-container">
                <div class="escala-list">                    
                     <!-- Encabezados de la tabla -->
                     <div class="escala-header">
                        <div class="escala-header-item">{{ 'definir_escalas.tipo' | translate }}</div>
                        <div class="escala-header-item">{{ 'definir_escalas.valor' | translate }}</div>
                        <div class="escala-header-item">{{ 'definir_escalas.acciones' | translate }}</div>
                    </div>
                    <div class="escala-item row mb-2" *ngFor="let escala of cuantitativaEscalas; let i = index">
                        <!-- Input de label -->
                        <div class="col-5">
                            <input class="form-control custom-input" [(ngModel)]="escala.label"
                                placeholder="{{ 'definir_escalas.estado' | translate }}">
                        </div>
                        <!-- Input de descripción -->
                        <div class="col-5">
                            <input class="form-control custom-input" [(ngModel)]="escala.descripcion"
                                placeholder="Valor numérico" pattern="[0-9]*" maxlength="3"
                                (keypress)="restrictNumeric($event)">
                        </div>
                        <!-- Botones de editar y eliminar -->
                        <div class="col-2 d-flex align-items-center justify-content-end">
                            <button mat-icon-button class="small-icon"
                                (click)="editarEscala(escala, i)"><mat-icon>edit</mat-icon></button>
                            <button mat-icon-button class="small-icon"
                                (click)="eliminarEscala('cuantitativa', i)"><mat-icon>delete</mat-icon></button>
                        </div>
                    </div>
                </div>
                <!-- Botones para cuantitativa -->
                <div class="button-container">
                    <button mat-flat-button color="primary" class="btn-add-scale" (click)="agregarEscala('cuantitativa')">
                        <mat-icon>add</mat-icon>
                        {{ 'definir_escalas.agregar_elemento_escala' | translate }}
                    </button>
                    <button mat-flat-button color="primary">
                        <mat-icon>save</mat-icon>
                        {{ 'definicion_formularios.guardar' | translate }}
                    </button>
                </div>
            </div>
        </mat-card-content>
    </mat-card>    
</div>



<!-- Modal para mostrar cuando el usuario no tiene permisos -->
<ng-template #noPermission>
    <div class="modal-overlay" *ngIf="!hasRole([ROLES.ADMIN_SGA, ROLES.DOCENTE, ROLES.ESTUDIANTE, ROLES.CONSEJO_CURRICULAR])">
      <div class="modal-content">
        <h2>{{ "definicion_formularios.sin_permisos_titulo" | translate }}</h2>
        <p>{{ "definicion_formularios.sin_permisos_mensaje" | translate }}</p>
        <!-- Icono grande de carita triste -->
        <div class="sad-face-icon">
          <mat-icon class="sad-icon">sentiment_dissatisfied</mat-icon>
        </div>
      </div>
    </div>
  </ng-template>